import{_ as _e,d as C,o as S,c as B,a as Te,w as W,r as I,n as be,u as _,Q as je,b as Re,e as h,f as x,g as re,p as oe,h as ie,i as b,j as U,k as Ne,v as $e,F as K,m as Me,l as M,q as se,s as q,t as z,x as w,y as O,z as A,C as Se,A as Ze,B as Ae,D as J,E as G,G as de,H as Fe,I as Ue}from"./index.f20dbbf3.js";import{Q as De}from"./QCard.6ab26f72.js";import"./use-dark.04c59b3f.js";const Ge=C({__name:"BaseBtn",props:{label:null,round:{type:Boolean},size:{default:"sm"},disable:{type:Boolean},submit:{type:Boolean}},setup(o){return(e,t)=>(S(),B(_(je),{class:be(`
        btn-${o.size}
        ${o.disable?"disable":""}
      `),unelevated:"","no-caps":"",label:o.label,disable:o.disable,type:o.submit?"submit":void 0,onClick:void 0},Te({_:2},[e.$slots.default?{name:"default",fn:W(()=>[I(e.$slots,"default",{},void 0,!0)]),key:"0"}:void 0,e.$slots.loading?{name:"loading",fn:W(()=>[I(e.$slots,"loading",{},void 0,!0)]),key:"1"}:void 0]),1032,["class","label","disable","type"]))}});var Ke=_e(Ge,[["__scopeId","data-v-6c117a1c"]]);const Ve=C({__name:"BaseCard",props:{borderRadius:{type:String,default:"lg"},borderWidth:{type:Number,default:3},borderStyle:{type:String,default:"solid"},shadow:Boolean,clickable:Boolean},setup(o,{expose:e}){const t=o;Re(l=>({"5af9d2e0":_(i),"6b3f0150":_(s),"9dae1dca":o.borderStyle}));const r=h();e({cardRef:r});const i=x(()=>({none:"0px",sm:"10px",lg:"20px"})[t.borderRadius]),s=x(()=>`${t.borderWidth}px`);return(l,n)=>(S(),B(De,{class:be({clickable:o.clickable,shadow:o.shadow}),flat:!o.shadow,ref_key:"cardRef",ref:r},{default:W(()=>[I(l.$slots,"default",{},void 0,!0)]),_:3},8,["class","flat"]))}});var We=_e(Ve,[["__scopeId","data-v-5096f8f0"]]);let T=Symbol("map"),j=Symbol("api"),Oe=Symbol("marker"),Pe=Symbol("markerCluster"),H=Symbol("CustomMarker"),Ie=Symbol("mapTilesLoaded"),E="click dblclick drag dragend dragstart mousedown mousemove mouseout mouseover mouseup rightclick".split(" ");var He=function o(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r;if(Array.isArray(e)){var i=e.length;if(i!=t.length)return!1;for(r=i;r--!==0;)if(!o(e[r],t[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();var s=Object.keys(e);if(i=s.length,i!==Object.keys(t).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[r]))return!1;for(r=i;r--!==0;)if(i=s[r],!o(e[i],t[i]))return!1;return!0}return e!==e&&t!==t};class P{constructor({apiKey:e,channel:t,client:r,id:i="__googleMapsScriptId",libraries:s=[],language:l,region:n,version:p,mapIds:u,nonce:a,retries:d=3,url:c="https://maps.googleapis.com/maps/api/js"}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.loading=this.done=!1,this.errors=[],this.version=p,this.apiKey=e,this.channel=t,this.client=r,this.id=i||"__googleMapsScriptId",this.libraries=s,this.language=l,this.region=n,this.mapIds=u,this.nonce=a,this.retries=d,this.url=c,P.instance){if(!He(this.options,P.instance.options))throw Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(P.instance.options)}`);return P.instance}P.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url}}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+=`?callback=${this.CALLBACK}`,this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),0<this.libraries.length&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),e}deleteScript(){let e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,t)=>{this.loadCallback(r=>{r?t(r.error):e(window.google)})})}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){if(document.getElementById(this.id))this.callback();else{var e=this.createUrl(),t=document.createElement("script");t.id=this.id,t.type="text/javascript",t.src=e,t.onerror=this.loadErrorCallback.bind(this),t.defer=!0,t.async=!0,this.nonce&&(t.nonce=this.nonce),document.head.appendChild(t)}}reset(){this.deleteScript(),this.loading=this.done=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){this.errors.push(e),this.errors.length<=this.retries?(e=this.errors.length*Math.pow(2,this.errors.length),console.log(`Failed to load Google Maps script, retrying in ${e} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},e)):(this.onerrorEvent=e,this.callback())}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){this.resetIfRetryingFailed(),this.done?this.callback():window.google&&window.google.maps&&window.google.maps.version?(console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),this.callback()):this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}function Qe(o){return class extends o.OverlayView{constructor(e){super();let{element:t,...r}=e;this.element=t,this.opts=r,this.opts.map&&this.setMap(this.opts.map)}getPosition(){return this.opts.position?this.opts.position instanceof o.LatLng?this.opts.position:new o.LatLng(this.opts.position):null}getVisible(){if(!this.element)return!1;let e=this.element;return e.style.display!=="none"&&e.style.visibility!=="hidden"&&(e.style.opacity===""||.01<Number(e.style.opacity))}onAdd(){if(this.element){var e=this.getPanes();e&&e.overlayMouseTarget.appendChild(this.element)}}draw(){if(this.element){var e=this.getProjection().fromLatLngToDivPixel(this.getPosition());if(e){this.element.style.position="absolute";let r=this.element.offsetHeight;var t=this.element.offsetWidth;switch(this.opts.anchorPoint){case"TOP_CENTER":t=e.x-t/2,e=e.y;break;case"BOTTOM_CENTER":t=e.x-t/2,e=e.y-r;break;case"LEFT_CENTER":t=e.x,e=e.y-r/2;break;case"RIGHT_CENTER":t=e.x-t,e=e.y-r/2;break;case"TOP_LEFT":t=e.x,e=e.y;break;case"TOP_RIGHT":t=e.x-t,e=e.y;break;case"BOTTOM_LEFT":t=e.x,e=e.y-r;break;case"BOTTOM_RIGHT":t=e.x-t,e=e.y-r;break;default:t=e.x-t/2,e=e.y-r/2}this.element.style.left=t+"px",this.element.style.top=e+"px",this.element.style.transform=`translateX(${this.opts.offsetX||0}px) translateY(${this.opts.offsetY||0}px)`,this.opts.zIndex&&(this.element.style.zIndex=this.opts.zIndex.toString())}}}onRemove(){this.element&&this.element.remove()}setOptions(e){this.opts=e,this.draw()}}}let pe,ce="bounds_changed center_changed click dblclick drag dragend dragstart heading_changed idle maptypeid_changed mousemove mouseout mouseover projection_changed resize rightclick tilesloaded tilt_changed zoom_changed".split(" ");var ne=C({props:{apiPromise:{type:Promise},apiKey:{type:String,default:""},version:{type:String,default:"weekly"},libraries:{type:Array,default:()=>["places"]},region:{type:String,required:!1},language:{type:String,required:!1},backgroundColor:{type:String,required:!1},center:{type:Object,default:()=>({lat:0,lng:0})},clickableIcons:{type:Boolean,required:!1,default:void 0},controlSize:{type:Number,required:!1},disableDefaultUi:{type:Boolean,required:!1,default:void 0},disableDoubleClickZoom:{type:Boolean,required:!1,default:void 0},draggable:{type:Boolean,required:!1,default:void 0},draggableCursor:{type:String,required:!1},draggingCursor:{type:String,required:!1},fullscreenControl:{type:Boolean,required:!1,default:void 0},fullscreenControlPosition:{type:String,required:!1},gestureHandling:{type:String,required:!1},heading:{type:Number,required:!1},keyboardShortcuts:{type:Boolean,required:!1,default:void 0},mapTypeControl:{type:Boolean,required:!1,default:void 0},mapTypeControlOptions:{type:Object,required:!1},mapTypeId:{type:[Number,String],required:!1},mapId:{type:String,required:!1},maxZoom:{type:Number,required:!1},minZoom:{type:Number,required:!1},noClear:{type:Boolean,required:!1,default:void 0},panControl:{type:Boolean,required:!1,default:void 0},panControlPosition:{type:String,required:!1},restriction:{type:Object,required:!1},rotateControl:{type:Boolean,required:!1,default:void 0},rotateControlPosition:{type:String,required:!1},scaleControl:{type:Boolean,required:!1,default:void 0},scaleControlStyle:{type:Number,required:!1},scrollwheel:{type:Boolean,required:!1,default:void 0},streetView:{type:Object,required:!1},streetViewControl:{type:Boolean,required:!1,default:void 0},streetViewControlPosition:{type:String,required:!1},styles:{type:Array,required:!1},tilt:{type:Number,required:!1},zoom:{type:Number,required:!1},zoomControl:{type:Boolean,required:!1,default:void 0},zoomControlPosition:{type:String,required:!1}},emits:ce,setup(o,{emit:e}){let t=h(),r=h(!1),i=h(),s=h(),l=h(!1);A(T,i),A(j,s),A(Ie,l);let n=()=>{const a={...o};Object.keys(a).forEach(c=>{a[c]===void 0&&delete a[c]});var d=c=>{var m;return c?{position:(m=s.value)===null||m===void 0?void 0:m.ControlPosition[c]}:{}};return d={scaleControlOptions:o.scaleControlStyle?{style:o.scaleControlStyle}:{},panControlOptions:d(o.panControlPosition),zoomControlOptions:d(o.zoomControlPosition),rotateControlOptions:d(o.rotateControlPosition),streetViewControlOptions:d(o.streetViewControlPosition),fullscreenControlOptions:d(o.fullscreenControlPosition),disableDefaultUI:o.disableDefaultUi},{...a,...d}},p=M([s,i],([a,d])=>{a&&d&&(a.event.addListenerOnce(d,"tilesloaded",()=>{l.value=!0}),setTimeout(p,0))},{immediate:!0}),u=a=>{s.value=O(a.maps),i.value=O(new a.maps.Map(t.value,n())),a=Qe(s.value),s.value[H]=a,ce.forEach(d=>{var c;(c=i.value)===null||c===void 0||c.addListener(d,m=>e(d,m))}),r.value=!0,a=Object.keys(o).filter(d=>!"apiPromise apiKey version libraries region language center zoom".split(" ").includes(d)).map(d=>z(o,d)),M([()=>o.center,()=>o.zoom,...a],([d,c],[m,v])=>{var g,f,k;const{center:N,zoom:$,...y}=n();(g=i.value)===null||g===void 0||g.setOptions(y),c!==void 0&&c!==v&&((f=i.value)===null||f===void 0||f.setZoom(c)),c=!m||d.lng!==m.lng||d.lat!==m.lat,d&&c&&((k=i.value)===null||k===void 0||k.panTo(d))})};return se(()=>{if(o.apiPromise&&o.apiPromise instanceof Promise)o.apiPromise.then(u);else{try{const{apiKey:a,region:d,version:c,language:m,libraries:v}=o;pe=new P({apiKey:a,region:d,version:c,language:m,libraries:v})}catch(a){console.error(a)}pe.load().then(u)}}),q(()=>{var a;l.value=!1,i.value&&((a=s.value)===null||a===void 0||a.event.clearInstanceListeners(i.value))}),{mapRef:t,ready:r,map:i,api:s,mapTilesLoaded:l}}});function le(o,e){if(e===void 0&&(e={}),e=e.insertAt,o&&typeof document!="undefined"){var t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=o:r.appendChild(document.createTextNode(o))}}le(`
.mapdiv[data-v-177d06e3] {
  width: 100%;
  height: 100%;
}
`);let Xe=re();oe("data-v-177d06e3");let Je={ref:"mapRef",class:"mapdiv"};ie();let Ye=Xe(o=>(S(),B("div",null,[b("div",Je,null,512),I(o.$slots,"default",{ready:o.ready,map:o.map,api:o.api,mapTilesLoaded:o.mapTilesLoaded},void 0,!0)])));ne.render=Ye;ne.__scopeId="data-v-177d06e3";var D=function o(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r;if(Array.isArray(e)){var i=e.length;if(i!=t.length)return!1;for(r=i;r--!==0;)if(!o(e[r],t[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();var s=Object.keys(e);if(i=s.length,i!==Object.keys(t).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[r]))return!1;for(r=i;r--!==0;)if(i=s[r],!o(e[i],t[i]))return!1;return!0}return e!==e&&t!==t};let R=(o,e,t,r)=>{const i=h(),s=w(T,h()),l=w(j,h()),n=w(Pe,h()),p=x(()=>!!(n.value&&l.value&&(i.value instanceof l.value.Marker||i.value instanceof l.value[H])));return M([s,t],(u,[a,d])=>{var c,m,v;u=!D(t.value,d)||s.value!==a,s.value&&l.value&&u&&(i.value?(i.value.setOptions(t.value),p.value&&((c=n.value)===null||c===void 0||c.removeMarker(i.value),(m=n.value)===null||m===void 0||m.addMarker(i.value))):(i.value=o==="Marker"?O(new l.value[o](t.value)):o===H?O(new l.value[o](t.value)):O(new l.value[o]({...t.value,map:s.value})),p.value?(v=n.value)===null||v===void 0||v.addMarker(i.value):i.value.setMap(s.value),e.forEach(g=>{var f;(f=i.value)===null||f===void 0||f.addListener(g,k=>r(g,k))})))},{immediate:!0}),q(()=>{var u,a;i.value&&((u=l.value)===null||u===void 0||u.event.clearInstanceListeners(i.value),p.value?(a=n.value)===null||a===void 0||a.removeMarker(i.value):i.value.setMap(null))}),i},he="animation_changed click dblclick rightclick dragstart dragend drag mouseover mousedown mouseout mouseup draggable_changed clickable_changed contextmenu cursor_changed flat_changed rightclick zindex_changed icon_changed position_changed shape_changed title_changed visible_changed".split(" ");var me=C({name:"Marker",props:{options:{type:Object,required:!0}},emits:he,setup(o,{emit:e,expose:t,slots:r}){return o=z(o,"options"),e=R("Marker",he,o,e),A(Oe,e),t({marker:e}),()=>{var i;return(i=r.default)===null||i===void 0?void 0:i.call(r)}}}),et=C({name:"Polyline",props:{options:{type:Object,required:!0}},emits:E,setup(o,{emit:e}){return o=z(o,"options"),{polyline:R("Polyline",E,o,e)}},render:()=>null}),tt=C({name:"Polygon",props:{options:{type:Object,required:!0}},emits:E,setup(o,{emit:e}){return o=z(o,"options"),{polygon:R("Polygon",E,o,e)}},render:()=>null});let ve=E.concat(["bounds_changed"]);C({name:"Rectangle",props:{options:{type:Object,required:!0}},emits:ve,setup(o,{emit:e}){return o=z(o,"options"),{rectangle:R("Rectangle",ve,o,e)}},render:()=>null});let ge=E.concat(["center_changed","radius_changed"]);C({name:"Circle",props:{options:{type:Object,required:!0}},emits:ge,setup(o,{emit:e}){return o=z(o,"options"),{circle:R("Circle",ge,o,e)}},render:()=>null});var rt=C({props:{position:{type:String,required:!0},index:{type:Number,default:1}},emits:["content:loaded"],setup(o,{emit:e}){let t=h(null),r=w(T,h()),i=w(j,h()),s=w(Ie,h(!1)),l=h(!1),n=M([s,i,t],([a,d,c])=>{d&&a&&c&&(p(o.position),l.value=!0,e("content:loaded"),setTimeout(n,0))},{immediate:!0}),p=a=>{r.value&&i.value&&t.value&&r.value.controls[i.value.ControlPosition[a]].push(t.value)},u=a=>{if(r.value&&i.value){let d=null;a=i.value.ControlPosition[a],r.value.controls[a].forEach((c,m)=>{c===t.value&&(d=m)}),d!==null&&r.value.controls[a].removeAt(d)}};return q(()=>u(o.position)),M(()=>o.position,(a,d)=>{u(d),p(a)}),M(()=>o.index,a=>{a&&t.value&&(t.value.index=o.index)}),{controlRef:t,showContent:l}}});let ot={ref:"controlRef"};rt.render=function(o){return S(),B(K,null,[U(`
    v-show must be used instead of v-if otherwise there
    would be no rendered content pushed to the map controls
  `),Ne(b("div",ot,[I(o.$slots,"default")],512),[[$e,o.showContent]])],2112)};let fe="closeclick content_changed domready position_changed visible zindex_changed".split(" ");var Le=C({inheritAttrs:!1,props:{options:{type:Object,default:()=>({})}},emits:fe,setup(o,{slots:e,emit:t}){let r=h(),i=h(),s=w(T,h()),l=w(j,h()),n=w(Oe,h()),p,u=x(()=>{var a;return(a=e.default)===null||a===void 0?void 0:a.call(e).some(d=>d.type!==Se)});return se(()=>{M([s,()=>o.options],([,a],[d,c])=>{d=!D(a,c)||s.value!==d,s.value&&l.value&&d&&(r.value?(r.value.setOptions({...a,content:u.value?i.value:a.content}),n.value||r.value.open({map:s.value})):(r.value=O(new l.value.InfoWindow({...a,content:u.value?i.value:a.content})),n.value?p=n.value.addListener("click",()=>{r.value&&r.value.open({map:s.value,anchor:n.value})}):r.value.open({map:s.value}),fe.forEach(m=>{var v;(v=r.value)===null||v===void 0||v.addListener(m,g=>t(m,g))})))},{immediate:!0})}),q(()=>{var a;p&&p.remove(),r.value&&((a=l.value)===null||a===void 0||a.event.clearInstanceListeners(r.value),r.value.close())}),{infoWindow:r,infoWindowRef:i,hasSlotContent:u}}});le(`
.info-window-wrapper[data-v-5b373d6e] {
  display: none;
}
.mapdiv .info-window-wrapper[data-v-5b373d6e] {
  display: inline-block;
}
`);let it=re();oe("data-v-5b373d6e");let st={key:0,class:"info-window-wrapper"};ie();let nt=it(o=>o.hasSlotContent?(S(),B("div",st,[b("div",Me({ref:"infoWindowRef"},o.$attrs),[I(o.$slots,"default",{},void 0,!0)],16)])):U("v-if",!0));Le.render=nt;Le.__scopeId="data-v-5b373d6e";function ee(o,e,t,r,i,s){if(!(i-r<=t)){var l=r+i>>1;Ee(o,e,l,r,i,s%2),ee(o,e,t,r,l-1,s+1),ee(o,e,t,l+1,i,s+1)}}function Ee(o,e,t,r,i,s){for(;i>r;){if(600<i-r){var l=i-r+1,n=t-r+1,p=Math.log(l),u=.5*Math.exp(2*p/3);p=.5*Math.sqrt(p*u*(l-u)/l)*(0>n-l/2?-1:1),Ee(o,e,t,Math.max(r,Math.floor(t-n*u/l+p)),Math.min(i,Math.floor(t+(l-n)*u/l+p)),s)}for(l=e[2*t+s],n=r,u=i,Z(o,e,r,t),e[2*i+s]>l&&Z(o,e,r,i);n<u;){for(Z(o,e,n,u),n++,u--;e[2*n+s]<l;)n++;for(;e[2*u+s]>l;)u--}e[2*r+s]===l?Z(o,e,r,u):(u++,Z(o,e,u,i)),u<=t&&(r=u+1),t<=u&&(i=u-1)}}function Z(o,e,t,r){Y(o,t,r),Y(e,2*t,2*r),Y(e,2*t+1,2*r+1)}function Y(o,e,t){let r=o[e];o[e]=o[t],o[t]=r}let lt=o=>o[0],at=o=>o[1];class ye{constructor(e,t=lt,r=at,i=64,s=Float64Array){this.nodeSize=i,this.points=e;let l=this.ids=new(65536>e.length?Uint16Array:Uint32Array)(e.length);s=this.coords=new s(2*e.length);for(let n=0;n<e.length;n++)l[n]=n,s[2*n]=t(e[n]),s[2*n+1]=r(e[n]);ee(l,s,i,0,l.length-1,0)}range(e,t,r,i){{var s=this.ids,l=this.coords,n=this.nodeSize;let u=[0,s.length-1,0],a=[],d,c;for(;u.length;){var p=u.pop();let m=u.pop(),v=u.pop();if(m-v<=n){for(p=v;p<=m;p++)d=l[2*p],c=l[2*p+1],d>=e&&d<=r&&c>=t&&c<=i&&a.push(s[p]);continue}let g=Math.floor((v+m)/2);d=l[2*g],c=l[2*g+1],d>=e&&d<=r&&c>=t&&c<=i&&a.push(s[g]);let f=(p+1)%2;(p===0?e<=d:t<=c)&&(u.push(v),u.push(g-1),u.push(f)),(p===0?r>=d:i>=c)&&(u.push(g+1),u.push(m),u.push(f))}e=a}return e}within(e,t,r){{var i=this.ids,s=this.coords,l=this.nodeSize;let d=[0,i.length-1,0],c=[],m=r*r;for(;d.length;){var n=d.pop();let v=d.pop();var p=d.pop();if(v-p<=l){for(n=p;n<=v;n++){p=s[2*n]-e;var u=s[2*n+1]-t;p=p*p+u*u,p<=m&&c.push(i[n])}continue}u=Math.floor((p+v)/2);let g=s[2*u],f=s[2*u+1];{var a=g-e;let k=f-t;a=a*a+k*k}a<=m&&c.push(i[u]),a=(n+1)%2,(n===0?e-r<=g:t-r<=f)&&(d.push(p),d.push(u-1),d.push(a)),(n===0?e+r>=g:t+r>=f)&&(d.push(u+1),d.push(v),d.push(a))}e=c}return e}}let ut={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:o=>o},Q=Math.fround||(o=>e=>(o[0]=+e,o[0]))(new Float32Array(1));class dt{constructor(e){this.options=F(Object.create(ut),e),this.trees=Array(this.options.maxZoom+1)}load(e){let{log:t,minZoom:r,maxZoom:i,nodeSize:s}=this.options;t&&console.time("total time");var l=`prepare ${e.length} points`;t&&console.time(l),this.points=e;let n=[];for(let p=0;p<e.length;p++)e[p].geometry&&n.push(ct(e[p],p));for(this.trees[i+1]=new ye(n,Ce,we,s,Float32Array),t&&console.timeEnd(l),e=i;e>=r;e--)l=+Date.now(),n=this._cluster(n,e),this.trees[e]=new ye(n,Ce,we,s,Float32Array),t&&console.log("z%d: %d clusters in %dms",e,n.length,+Date.now()-l);return t&&console.timeEnd("total time"),this}getClusters(e,t){let r=((e[0]+180)%360+360)%360-180;var i=Math.max(-90,Math.min(90,e[1])),s=e[2]===180?180:((e[2]+180)%360+360)%360-180;let l=Math.max(-90,Math.min(90,e[3]));if(360<=e[2]-e[0])r=-180,s=180;else if(r>s){var n=this.getClusters([r,i,180,l],t);return i=this.getClusters([-180,i,s,l],t),n.concat(i)}t=this.trees[this._limitZoom(t)],s=t.range(r/360+.5,V(l),s/360+.5,V(i)),i=[];for(n of s)s=t.points[n],i.push(s.numPoints?ke(s):this.points[s.index]);return i}getChildren(e){var t=this._getOriginId(e),r=this._getOriginZoom(e);let i=this.trees[r];if(!i||(t=i.points[t],!t))throw Error("No cluster with the specified id.");t=i.within(t.x,t.y,this.options.radius/(this.options.extent*Math.pow(2,r-1))),r=[];for(let s of t)t=i.points[s],t.parentId===e&&r.push(t.numPoints?ke(t):this.points[t.index]);if(r.length===0)throw Error("No cluster with the specified id.");return r}getLeaves(e,t,r){let i=[];return this._appendLeaves(i,e,t||10,r||0,0),i}getTile(e,t,r){let i=this.trees[this._limitZoom(e)];e=Math.pow(2,e);let{extent:s,radius:l}=this.options,n=l/s,p=(r-n)/e,u=(r+1+n)/e,a={features:[]};return this._addTileFeatures(i.range((t-n)/e,p,(t+1+n)/e,u),i.points,t,r,e,a),t===0&&this._addTileFeatures(i.range(1-n/e,p,1,u),i.points,e,r,e,a),t===e-1&&this._addTileFeatures(i.range(0,p,n/e,u),i.points,-1,r,e,a),a.features.length?a:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom&&(e=this.getChildren(e),t++,e.length===1);)e=e[0].properties.cluster_id;return t}_appendLeaves(e,t,r,i,s){t=this.getChildren(t);for(let l of t)if((t=l.properties)&&t.cluster?s=s+t.point_count<=i?s+t.point_count:this._appendLeaves(e,t.cluster_id,r,i,s):s<i?s++:e.push(l),e.length===r)break;return s}_addTileFeatures(e,t,r,i,s,l){for(let u of e){e=t[u];let a=e.numPoints;var n=void 0;let d;var p=void 0;a?(n=Be(e),d=e.x,p=e.y):(p=this.points[e.index],n=p.properties,d=p.geometry.coordinates[0]/360+.5,p=V(p.geometry.coordinates[1])),n={type:1,geometry:[[Math.round(this.options.extent*(d*s-r)),Math.round(this.options.extent*(p*s-i))]],tags:n};let c;a?c=e.id:this.options.generateId?c=e.index:this.points[e.index].id&&(c=this.points[e.index].id),c!==void 0&&(n.id=c),l.features.push(n)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){let r=[],{radius:i,extent:s,reduce:l,minPoints:n}=this.options,p=i/(s*Math.pow(2,t));for(let m=0;m<e.length;m++){var u=e[m];if(u.zoom<=t)continue;u.zoom=t;let v=this.trees[t+1];var a=v.within(u.x,u.y,p),d=u.numPoints||1;let g=d;for(let f of a){var c=v.points[f];c.zoom>t&&(g+=c.numPoints||1)}if(g>d&&g>=n){c=u.x*d;let f=u.y*d;d=l&&1<d?this._map(u,!0):null;let k=(m<<5)+(t+1)+this.points.length;for(let N of a){if(a=v.points[N],a.zoom<=t)continue;a.zoom=t;let $=a.numPoints||1;c+=a.x*$,f+=a.y*$,a.parentId=k,l&&(d||(d=this._map(u,!0)),l(d,this._map(a)))}u.parentId=k,r.push(pt(c/g,f/g,k,g,d))}else if(r.push(u),1<g)for(let f of a)u=v.points[f],u.zoom<=t||(u.zoom=t,r.push(u))}return r}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t){if(e.numPoints)return t?F({},e.properties):e.properties;e=this.points[e.index].properties;let r=this.options.map(e);return t&&r===e?F({},r):r}}function pt(o,e,t,r,i){return{x:Q(o),y:Q(e),zoom:1/0,id:t,parentId:-1,numPoints:r,properties:i}}function ct(o,e){let[t,r]=o.geometry.coordinates;return{x:Q(t/360+.5),y:Q(V(r)),zoom:1/0,index:e,parentId:-1}}function ke(o){var e=o.id,t=Be(o);return{type:"Feature",id:e,properties:t,geometry:{type:"Point",coordinates:[360*(o.x-.5),360*Math.atan(Math.exp((180-360*o.y)*Math.PI/180))/Math.PI-90]}}}function Be(o){let e=o.numPoints,t=1e4<=e?`${Math.round(e/1e3)}k`:1e3<=e?`${Math.round(e/100)/10}k`:e;return F(F({},o.properties),{cluster:!0,cluster_id:o.id,point_count:e,point_count_abbreviated:t})}function V(o){return o=Math.sin(o*Math.PI/180),o=.5-.25*Math.log((1+o)/(1-o))/Math.PI,0>o?0:1<o?1:o}function F(o,e){for(let t in e)o[t]=e[t];return o}function Ce(o){return o.x}function we(o){return o.y}class te{constructor({markers:e,position:t}){this.markers=e,t&&(this._position=t instanceof google.maps.LatLng?t:new google.maps.LatLng(t))}get bounds(){if(this.markers.length!==0||this._position)return this.markers.reduce((e,t)=>e.extend(t.getPosition()),new google.maps.LatLngBounds(this._position,this._position))}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>e.getVisible()).length}push(e){this.markers.push(e)}delete(){this.marker&&(this.marker.setMap(null),delete this.marker),this.markers.length=0}}class ht{constructor({maxZoom:e=16}){this.maxZoom=e}noop({markers:e}){return mt(e)}}let mt=o=>o.map(e=>new te({position:e.getPosition(),markers:[e]}));class vt extends ht{constructor(e){var{maxZoom:t,radius:r=60}=e,i=["maxZoom","radius"],s={},l;for(l in e)Object.prototype.hasOwnProperty.call(e,l)&&0>i.indexOf(l)&&(s[l]=e[l]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(l=Object.getOwnPropertySymbols(e);n<l.length;n++)0>i.indexOf(l[n])&&Object.prototype.propertyIsEnumerable.call(e,l[n])&&(s[l[n]]=e[l[n]])}super({maxZoom:t}),this.superCluster=new dt(Object.assign({maxZoom:this.maxZoom,radius:r},s)),this.state={zoom:null}}calculate(e){let t=!1;if(!D(e.markers,this.markers)){t=!0,this.markers=[...e.markers];var r=this.markers.map(i=>({type:"Feature",geometry:{type:"Point",coordinates:[i.getPosition().lng(),i.getPosition().lat()]},properties:{marker:i}}));this.superCluster.load(r)}return r={zoom:e.map.getZoom()},t||this.state.zoom>this.maxZoom&&r.zoom>this.maxZoom||(t=t||!D(this.state,r)),this.state=r,t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t}}cluster({map:e}){return this.superCluster.getClusters([-180,-90,180,90],Math.round(e.getZoom())).map(this.transformCluster.bind(this))}transformCluster({geometry:{coordinates:[e,t]},properties:r}){return r.cluster?new te({markers:this.superCluster.getLeaves(r.cluster_id,1/0).map(i=>i.properties.marker),position:new google.maps.LatLng({lat:t,lng:e})}):(e=r.marker,new te({markers:[e],position:e.getPosition()}))}}class gt{constructor(e,t){this.markers={sum:e.length},e=t.map(i=>i.count);let r=e.reduce((i,s)=>i+s,0);this.clusters={count:t.length,markers:{mean:r/t.length,sum:r,min:Math.min(...e),max:Math.max(...e)}}}}class ft{render({count:e,position:t},r){return r=window.btoa(`
  <svg fill="${e>Math.max(10,r.clusters.markers.mean)?"#ff0000":"#0000ff"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240">
    <circle cx="120" cy="120" opacity=".6" r="70" />
    <circle cx="120" cy="120" opacity=".3" r="90" />
    <circle cx="120" cy="120" opacity=".2" r="110" />
  </svg>`),new google.maps.Marker({position:t,icon:{url:`data:image/svg+xml;base64,${r}`,scaledSize:new google.maps.Size(45,45)},label:{text:String(e),color:"rgba(255,255,255,0.9)",fontSize:"12px"},title:`Cluster of ${e} markers`,zIndex:Number(google.maps.Marker.MAX_ZINDEX)+e})}}class ae{constructor(){var e=ae,t=google.maps.OverlayView;for(let r in t.prototype)e.prototype[r]=t.prototype[r]}}var L,ue=L||(L={});ue.CLUSTERING_BEGIN="clusteringbegin";ue.CLUSTERING_END="clusteringend";ue.CLUSTER_CLICK="click";let yt=(o,e,t)=>{t.fitBounds(e.bounds)};class kt extends ae{constructor({map:e,markers:t=[],algorithm:r=new vt({}),renderer:i=new ft,onClusterClick:s=yt}){super(),this.markers=[...t],this.clusters=[],this.algorithm=r,this.renderer=i,this.onClusterClick=s,e&&this.setMap(e)}addMarker(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}addMarkers(e,t){e.forEach(r=>{this.addMarker(r,!0)}),t||this.render()}removeMarker(e,t){let r=this.markers.indexOf(e);return r===-1?!1:(e.setMap(null),this.markers.splice(r,1),t||this.render(),!0)}removeMarkers(e,t){let r=!1;return e.forEach(i=>{r=this.removeMarker(i,!0)||r}),r&&!t&&this.render(),r}clearMarkers(e){this.markers.length=0,e||this.render()}render(){let e=this.getMap();if(e instanceof google.maps.Map&&this.getProjection()){google.maps.event.trigger(this,L.CLUSTERING_BEGIN,this);let{clusters:t,changed:r}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});(r||r==null)&&(this.reset(),this.clusters=t,this.renderClusters()),google.maps.event.trigger(this,L.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>e.setMap(null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){let e=new gt(this.markers,this.clusters),t=this.getMap();this.clusters.forEach(r=>{r.markers.length===1?r.marker=r.markers[0]:(r.marker=this.renderer.render(r,e),this.onClusterClick&&r.marker.addListener("click",i=>{google.maps.event.trigger(this,L.CLUSTER_CLICK,r),this.onClusterClick(i,r,t)})),r.marker.setMap(t)})}}let xe=Object.values(L);C({name:"MarkerCluster",props:{options:{type:Object,default:()=>({})}},emits:xe,setup(o,{emit:e,expose:t,slots:r}){let i=h(),s=w(T,h()),l=w(j,h());return A(Pe,i),M(s,()=>{s.value&&(i.value=O(new kt({map:s.value,...o.options})),xe.forEach(n=>{var p;(p=i.value)===null||p===void 0||p.addListener(n,u=>e(n,u))}))},{immediate:!0}),q(()=>{var n;i.value&&((n=l.value)===null||n===void 0||n.event.clearInstanceListeners(i.value),i.value.clearMarkers(),i.value.setMap(null))}),t({markerCluster:i}),()=>{var n;return(n=r.default)===null||n===void 0?void 0:n.call(r)}}});var qe=C({inheritAttrs:!1,props:{options:{type:Object,required:!0}},setup(o,{slots:e,emit:t}){let r=h(),i=h(),s=x(()=>{var n;return(n=e.default)===null||n===void 0?void 0:n.call(e).some(p=>p.type!==Se)}),l=x(()=>({...o.options,element:r.value}));return se(()=>{i=R(H,[],l,t)}),{customMarkerRef:r,customMarker:i,hasSlotContent:s}}});le(`
.custom-marker-wrapper[data-v-b9d5ec8a] {
  display: none;
}
.mapdiv .custom-marker-wrapper[data-v-b9d5ec8a] {
  display: inline-block;
}
`);let Ct=re();oe("data-v-b9d5ec8a");let wt={key:0,class:"custom-marker-wrapper"};ie();let xt=Ct(o=>o.hasSlotContent?(S(),B("div",wt,[b("div",Me({ref:"customMarkerRef",style:{cursor:o.$attrs.onClick?"pointer":void 0}},o.$attrs),[I(o.$slots,"default",{},void 0,!0)],16)])):U("v-if",!0));qe.render=xt;qe.__scopeId="data-v-b9d5ec8a";C({name:"HeatmapLayer",props:{options:{type:Object,default:()=>({})}},setup(o){let e=h(),t=w(T,h()),r=w(j,h());return M([t,()=>o.options],([,i],[s,l])=>{var n;if(s=!D(i,l)||t.value!==s,t.value&&r.value&&s){if(i=structuredClone(i),i.data&&!(i.data instanceof r.value.MVCArray)){let p=r.value.LatLng;i.data=(n=i.data)===null||n===void 0?void 0:n.map(u=>u instanceof p||"location"in u&&(u.location instanceof p||u.location===null)?u:"location"in u?{...u,location:new p(u.location)}:new p(u))}e.value?e.value.setOptions(i):e.value=O(new r.value.visualization.HeatmapLayer({...i,map:t.value}))}},{immediate:!0}),q(()=>{e.value&&e.value.setMap(null)}),{heatmapLayer:e}},render:()=>null});const _t={class:"tw-flex tw-flex-col tw-items-center"},bt=C({__name:"GoogleMaps",props:{path:{type:Array,required:!0},fullPath:{type:Array,required:!0},center:{type:Object,required:!0},foundRoute:{type:Boolean,default:!1},cost:{type:Number,default:0}},emits:["update:usedUpdate"],setup(o,{emit:e}){const t=o,r=h(t.foundRoute),i=h(t.center),s=h(t.cost),l=h({lat:-6.9174639,lng:107.6191228}),n=h({lat:-6.9174639,lng:107.6191228}),p=y=>{l.value.lat=y.latLng.lat(),l.value.lng=y.latLng.lng()},u=y=>{n.value.lat=y.latLng.lat(),n.value.lng=y.latLng.lng()},a=Ze(),d=x(()=>a.state.pathRetrieved),c=x(()=>a.state.allPosition),m=x(()=>a.state.pathInString),v=x(()=>d.value.map(y=>({lat:y.latitude,lng:y.longitude}))),g=x(()=>c.value.map(y=>({lat:y.latitude,lng:y.longitude}))),f=h({path:v.value,geodesic:!0,strokeColor:"#000000",strokeOpacity:1,strokeWeight:5}),k=h({path:g.value,geodesic:!0,strokeColor:"#F50000",strokeOpacity:.3,strokeWeight:2,fillColor:"#90EE90"}),N=h();M([()=>i.value,()=>f.value.path],()=>{var y,X;r.value=t.foundRoute,e("update:usedUpdate",!0),s.value=t.cost,(X=(y=N.value)==null?void 0:y.map)==null||X.panTo(i.value)});const $=()=>{f.value.path=[{}],k.value.path=[{}],i.value=t.center,l.value=v.value[0],n.value=v.value[v.value.length-1],f.value.path=v.value,k.value.path=g.value};return(y,X)=>{const ze=Ae("BaseBtn");return S(),J(K,null,[b(_(ne),{ref_key:"map",ref:N,"api-key":"AIzaSyBLrkK67ZokwGfK6v64zcbhpon6jZ757YU",style:{width:"100%",height:"30em"},center:i.value,zoom:15},{default:W(()=>[b(_(me),{ref:"startPos",options:{position:l.value,draggable:!0,label:"start"},onDragend:p},null,8,["options"]),b(_(me),{ref:"goalPos",options:{position:n.value,draggable:!0,label:"goal"},onDragend:u},null,8,["options"]),r.value?(S(),J(K,{key:0},[b(_(et),{options:f.value,"z-index":4,geodesic:""},null,8,["options"]),b(_(tt),{options:k.value,"z-index":1},null,8,["options"])],64)):U("",!0)]),_:1},8,["center"]),G("div",_t,[r.value?(S(),J(K,{key:0},[G("h3",null,"Estimated: "+de(o.cost)+" km",1),G("h3",null,[Fe("Path: "),G("strong",null,de(_(m)),1)])],64)):U("",!0),b(ze,{label:"Update Map",size:"md",class:"tw-w-36",onClick:$,disable:_(v).length===0},null,8,["disable"])])],64)}}});var Pt=Ue(async({app:o})=>{o.component("BaseBtn",Ke).component("BaseCard",We).component("GoogleMaps",bt)});export{Pt as default};
